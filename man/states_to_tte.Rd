% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc.R
\name{states_to_tte}
\alias{states_to_tte}
\title{Convert Markov Data to Time-to-Event (Start-Stop) Format}
\usage{
states_to_tte(data, covariates = c("age", "sofa"))
}
\arguments{
\item{data}{A data frame containing trajectory data, typically the output from
\code{sim_trajectories_markov()} or \code{sim_trajectories_brownian()}. Must contain
columns: \code{id}, \code{time}, \code{y} (state), and \code{tx} (treatment).}

\item{covariates}{Character vector of additional covariate names to include in
the output (default: c("age", "sofa")). The first value of each covariate
per patient will be retained.}
}
\value{
A tibble in start-stop format with columns:
\code{id}, \code{tx}, \code{start}, \code{stop}, \code{y}, \code{yprev},
and specified covariates.
}
\description{
Converts a longitudinal dataset of daily states into a collapsed
start-stop format suitable for survival analysis
}
\details{
Each event change within a participant concludes a time interval indicated by
start and stop and the state at the end of the interval. Columns given in
covariates will be kept in the output.
}
\examples{
\dontrun{
# After simulating trajectories
trajectories <- sim_trajectories_markov(baseline_data, follow_up_time = 60,
                                        lp_function = my_lp)
tte_data <- states_to_tte(trajectories)

# With different covariates
tte_data <- states_to_tte(trajectories, covariates = c("age", "sofa", "baseline_severity"))
}
}
