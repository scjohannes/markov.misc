% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc.R
\name{calc_time_in_state_diff}
\alias{calc_time_in_state_diff}
\title{Calculate Difference in Time Alive and Out Of Hospital}
\usage{
calc_time_in_state_diff(data, target_state = 1)
}
\arguments{
\item{data}{A data frame containing trajectory data with columns: \code{id},
\code{y} (state), \code{tx} (treatment), and \code{time}.}

\item{target_state}{Integer. The state representing the outcome of interest
(default: 1, typically representing Home/Discharged/Alive and Out of Hospital).}
}
\value{
A tibble with the following columns:
\itemize{
\item \code{true_effect}: Difference in state occupation probability (tx=1 minus tx=0)
summed across all time points
\item \code{tx0_mean_time}: Mean time spent in target state for control group
\item \code{tx0_sd_time}: Standard deviation of time in target state for control group
\item \code{tx1_mean_time}: Mean time spent in target state for treatment group
\item \code{tx1_sd_time}: Standard deviation of time in target state for treatment group
}
}
\description{
Computes the true treatment effect as the difference in time spent in a
target state (typically "home" or "alive and out of hospital") between
treatment and control groups in simulated Markov trajectory data.
}
\details{
This function calculates the true treatment effect in two ways:
\enumerate{
\item \strong{State Occupation Probability Method}: Calculates the proportion of
patients in the target state at each time point for each treatment group,
then sums the difference across all time points.
\item \strong{Individual Time in State}: For each patient, counts the total number
of time periods spent in the target state, then computes group-level
means and standard deviations.
}

The \code{true_effect} represents the area between the state occupation curves
and can be interpreted as the expected difference in total days spent in
the target state over the follow-up period.
}
\examples{
\dontrun{
# Calculate true effect from simulated data
trajectories <- simulate_trajectories(baseline_data, lp_function = my_lp)
effect_summary <- calc_time_in_state_diff(trajectories, target_state = 1)

# View results
print(effect_summary)
}

}
