% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sops_new.R
\name{get_draws}
\alias{get_draws}
\title{Extract Individual Draws from Inference Objects}
\usage{
get_draws(object)
}
\arguments{
\item{object}{An object returned by \code{inferences()} with \code{return_bootstrap = TRUE}
(or similar inference functions that support storing draws).}
}
\value{
A data frame with columns:
\itemize{
\item boot_id: Bootstrap iteration number
\item time: Time point
\item state: State number
\item estimate: Bootstrap estimate of state occupation probability
\item Additional columns for standardization variables (e.g., tx)
}
Each row represents one bootstrap estimate for a specific time-state-treatment
combination.
}
\description{
Extracts the individual draws (bootstrap samples, simulated values from MVN, etc.)
from an object returned by \code{inferences()} with \code{return_bootstrap = TRUE}.
This allows users to analyze the full distribution, compute custom statistics,
or create visualizations, regardless of the sampling method used.
}
\details{
This function retrieves the draws from objects created by \code{inferences()}
(or similar inference functions). The exact name of the draws attribute
depends on the sampling method used (e.g., "bootstrap_draws" for bootstrap,
potentially "mvn_draws" for MVN simulation). If the attribute is not present
(i.e., the object was created without \code{return_bootstrap = TRUE}), an error is raised.

\strong{Common Use Cases:}
\itemize{
\item Plot distributions with histograms or density plots
\item Compute custom summary statistics (e.g., median, quantiles)
\item Aggregate across time to calculate total time in state
\item Compute treatment effects with CIs
\item Perform sensitivity analyses on the sampled values
\item Combine draws across multiple inference results
}
}
\examples{
\dontrun{
# Create object with bootstrap draws
result <- avg_sops(
  model = fit,
  newdata = data,
  variables = list(tx = c(0, 1)),
  times = 1:30,
  ylevels = 1:6,
  absorb = 6,
  id_var = "id"
) |>
  inferences(n_boot = 1000, return_bootstrap = TRUE)

# Extract draws
draws <- get_draws(result)

# Plot distribution for state 1 at time 10 under treatment
library(ggplot2)
draws |>
  filter(time == 10, state == 1, tx == 1) |>
  ggplot(aes(x = estimate)) +
  geom_histogram(bins = 30) +
  labs(title = "Distribution: P(State 1 | Time 10, Treatment)")

# Compute mean time in state 1 with bootstrap CI
library(dplyr)
time_in_state_boot <- draws |>
  filter(state == 1, tx == 1) |>
  group_by(boot_id) |>
  summarise(total_time = sum(estimate))

quantile(time_in_state_boot$total_time, c(0.025, 0.5, 0.975))

# Compare treatment effect on time in state
treatment_effect <- draws |>
  filter(state == 1) |>
  group_by(boot_id, tx) |>
  summarise(total_time = sum(estimate), .groups = "drop") |>
  pivot_wider(names_from = tx, values_from = total_time,
              names_prefix = "tx") |>
  mutate(effect = tx1 - tx0)

quantile(treatment_effect$effect, c(0.025, 0.5, 0.975))
}

}
\seealso{
\code{\link[=inferences]{inferences()}}, \code{\link[=avg_sops]{avg_sops()}}
}
