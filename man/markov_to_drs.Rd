% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc.R
\name{markov_to_drs}
\alias{markov_to_drs}
\title{Convert Markov Trajectory Data to Days Returned to Baseline (DRS) Format}
\usage{
markov_to_drs(
  data,
  follow_up_time,
  target_state = 1,
  death_state = 6,
  covariates = c("age", "sofa")
)
}
\arguments{
\item{data}{A data frame containing trajectory data, typically the output from
\code{simulate_trajectories()}. Must contain columns: \code{id}, \code{time}, \code{y} (state),
and \code{tx} (treatment).}

\item{follow_up_time}{Integer. Total follow-up time used in the simulation.
This is needed to calculate days at home from the last discharge.}

\item{target_state}{Integer. The state representing "home" or "baseline" (default: 1).}

\item{death_state}{Integer. The state representing death (default: 6).}

\item{covariates}{Character vector of additional covariate names to include in
the output (default: c("age", "sofa")). The first value of each covariate
per patient will be retained.}
}
\value{
A data frame with columns:
\itemize{
\item id: patient identifier
\item tx: treatment assignment
\item drs: days returned to baseline (or -1 if died)
\item any additional covariates specified
}
}
\description{
This function calculates "Days Returned to Baseline" (or "Days at Home") for
each patient. This is defined as the number of days spent in the target state
(typically Home) after the last discharge from a worse state. Patients who die
receive a score of -1.
}
\details{
The DRS (Days Returned to Baseline) outcome focuses on sustained recovery by
counting only the days at home after the final discharge. The calculation:
\itemize{
\item Find the last time point where the patient was NOT at home
\item Count the remaining days from that point to end of follow-up
\item If the patient died at any point, assign -1
}

This outcome is more sensitive to sustained recovery than simply counting
total days at home, as it emphasizes staying home rather than bouncing
in and out of the hospital.
}
\examples{
\dontrun{
# After simulating trajectories
trajectories <- simulate_trajectories(baseline_data, follow_up_time = 60,
                                      lp_function = my_lp)
drs_data <- markov_to_drs(trajectories, follow_up_time = 60)

# With different covariates
drs_data <- markov_to_drs(trajectories, follow_up_time = 60,
                          covariates = c("age", "sofa", "baseline_severity"))
}

}
