% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/viz.R
\name{plot_sops}
\alias{plot_sops}
\title{Plot Empirical State Occupancy Probabilities Over Time}
\usage{
plot_sops(
  data,
  time_var = "time",
  y_var = "y",
  facet_var = "tx",
  linetype_var = NULL,
  geom = c("bar", "line")
)
}
\arguments{
\item{data}{A data frame containing trajectory data, typically from
\code{sim_trajectories_markov()} or \code{sim_trajectories_brownian()}.}

\item{time_var}{Character string. Name of the time variable column (default: "time").}

\item{y_var}{Character string. Name of the state variable column (default: "y").}

\item{facet_var}{Character string or NULL. Name of the variable to facet by (default: "tx").
Set to NULL to disable faceting.}

\item{linetype_var}{Character string or NULL. Name of the variable to map to linetype
(default: NULL). Useful for comparing groups within the same plot. When both
\code{facet_var} and \code{linetype_var} are specified, you can facet by one variable
(e.g., site) and distinguish groups by linetype (e.g., treatment).}

\item{geom}{Character string. Type of plot: "bar" for stacked bar chart (default)
or "line" for line plot.}
}
\value{
A ggplot object showing empirical state occupancy probabilities over time.
}
\description{
Creates a visualization showing the empirical state occupancy probabilities
over time, with optional faceting by a grouping variable (typically treatment).
Can display as stacked bars (default) or as lines.
}
\details{
This function creates a visualization of how the distribution of patients
across states changes over time.

When \code{geom = "bar"} (default), each bar represents a time point with
colors indicating the empirical state occupancy probability for each state.

When \code{geom = "line"}, separate lines show the empirical state occupancy
probability for each state over time, which can be useful for seeing trends
in individual states.

Faceting allows comparison between groups (e.g., treatment vs. control).
The \code{linetype_var} parameter allows distinguishing groups by linetype instead
of (or in addition to) faceting, enabling more flexible plot layouts.
}
\examples{
\dontrun{
# After simulating trajectories
trajectories <- sim_trajectories_markov(baseline_data, lp_function = my_lp)

# Basic stacked bar plot
plot_sops(trajectories)

# Line plot with faceting by treatment
plot_sops(trajectories, geom = "line")

# Line plot with linetype by treatment (no faceting)
plot_sops(trajectories, geom = "line", facet_var = NULL, linetype_var = "tx")

# Facet by one variable, linetype by another
plot_sops(trajectories, facet_var = "site", linetype_var = "tx", geom = "line")

# Customize variable names
plot_sops(trajectories, time_var = "day", y_var = "state", facet_var = "treatment")
}
}
