% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/power.R
\name{sample_from_arrow}
\alias{sample_from_arrow}
\title{Sample Patients from Arrow Dataset}
\usage{
sample_from_arrow(data_path, sample_size, allocation_ratio = 0.5, seed = NULL)
}
\arguments{
\item{data_path}{Character. Path to the parquet file or Arrow dataset.}

\item{sample_size}{Integer. Total number of patients to sample.}

\item{allocation_ratio}{Numeric. Proportion of patients assigned to treatment
(default: 0.5 for 1:1 allocation).}

\item{seed}{Integer. Random seed for reproducibility (default: NULL).}
}
\value{
A tibble containing the sampled data with columns from the original
dataset.
}
\description{
Draws a random sample of patients from an Arrow dataset with specified
treatment allocation ratio.
}
\details{
This function efficiently samples from large Arrow datasets without loading
the entire dataset into memory. It:
\enumerate{
\item Identifies unique patient IDs in each treatment group
\item Randomly samples the specified number from each group
\item Filters and collects only the selected patients
}

The function assumes the dataset has an \code{id} column for patient identifiers
and a \code{tx} column for treatment assignment (0 = control, 1 = treatment).
}
\examples{
\dontrun{
# Sample 200 patients with 1:1 allocation
sample_data <- sample_from_arrow(
  data_path = "sim_data/trajectories.parquet",
  sample_size = 200,
  seed = 123
)

# Sample with 2:1 treatment:control allocation
sample_data <- sample_from_arrow(
  data_path = "sim_data/trajectories.parquet",
  sample_size = 300,
  allocation_ratio = 0.67,
  seed = 456
)
}

}
