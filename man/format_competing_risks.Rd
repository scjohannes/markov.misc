% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc.R
\name{format_competing_risks}
\alias{format_competing_risks}
\title{Format Time-to-Event Output for Competing Risks}
\usage{
format_competing_risks(data, event_status = 1, death_status = 6)
}
\arguments{
\item{data}{A data frame produced by \code{states_to_tte()} (must contain
columns \code{id}, \code{start}, \code{stop}, \code{y}, and \code{tx}).}

\item{event_status}{Integer code identifying the discharge state in \code{y}
(default: 1).}

\item{death_status}{Integer code identifying the death/absorbing state in \code{y}
(default: 6).}
}
\value{
A data frame with the same rows truncated at the first event per
\code{id}, and an added integer \code{status} column with values 0 (censored), 1
(discharge) or 2 (death). The function preserves other columns present
in the input.
}
\description{
Prepare the output from \code{states_to_tte()} for competing-risks analysis
(Fine-Gray style) by truncating each subject's record at the first of an
event of interest (e.g., discharge) or death event and encoding a final status variable suitable
for survival modelling (0 = censored, 1 = discharge, 2 = death).
}
\details{
This function expects the input produced by \code{states_to_tte()} which uses
\code{start}/\code{stop} interval times and a state label \code{y} at the end of each
interval.

For each subject (\code{id}) the function finds the earliest \code{stop} time at which
\code{y} equals \code{event_status} or \code{death_status}. All rows with \code{stop} after that
cutoff are removed. The final row at the cutoff receives \code{status} equal to
1 (discharge) or 2 (death). If neither event is observed for a subject the
subject remains in the dataset with \code{status = 0} (censored).
}
\examples{
\dontrun{
tte <- states_to_tte(trajectories)
fg_ready <- format_competing_risks(tte, event_status = 1, death_status = 6)
}

}
